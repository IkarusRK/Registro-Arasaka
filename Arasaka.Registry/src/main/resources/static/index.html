<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Terminal de Registro Arasaka</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    /* CSS inspirado na identidade visual da Arasaka */
    :root {
      --arasaka-red: #ff003c;
      --arasaka-black: #0a0a0a;
      --arasaka-dark-gray: #1a1a1a;
      --arasaka-light-gray: #e0e0e0;
      --arasaka-medium-gray: #555555;
    }

    body {
      font-family: 'Rajdhani', sans-serif;
      background-color: var(--arasaka-black);
      color: var(--arasaka-light-gray);
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      margin: 0;
      padding: 1rem;
      background-image: linear-gradient(rgba(255, 255, 255, 0.03) 1px, transparent 1px);
      background-size: 1px 2px;
    }

    /* Estilo para o logo no canto */
    .arasaka-corner-logo {
      position: fixed;
      top: 1.5rem;
      left: 1.5rem;
      width: 200px; /* Ajuste o tamanho conforme necessário */
      height: auto;
      z-index: 10;
      opacity: 0.7;
    }

    .form-container {
      background-color: var(--arasaka-dark-gray);
      padding: 2rem;
      border: 1px solid var(--arasaka-medium-gray);
      box-shadow: 0 0 15px rgba(255, 0, 60, 0.2);
      width: 100%;
      max-width: 550px;
    }

    .form-container h1 {
      text-align: center;
      color: var(--arasaka-light-gray);
      margin-bottom: 1.5rem;
      font-size: 2.5rem;
      font-weight: 700;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      border-bottom: 2px solid var(--arasaka-red);
      padding-bottom: 0.5rem;
    }

    .form-group {
      margin-bottom: 1.25rem;
      display: flex;
      flex-direction: column;
    }

    .form-group label {
      margin-bottom: 0.5rem;
      color: var(--arasaka-light-gray);
      font-weight: 600;
      font-size: 1rem;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    .form-group input,
    .form-group select {
      padding: 0.75rem;
      background-color: var(--arasaka-black);
      border: 1px solid var(--arasaka-medium-gray);
      color: var(--arasaka-light-gray);
      font-size: 1rem;
      font-family: 'Rajdhani', sans-serif;
      border-radius: 0;
      transition: border-color 0.2s, box-shadow 0.2s;
    }

    .form-group input:focus,
    .form-group select:focus {
      outline: none;
      border-color: var(--arasaka-red);
      box-shadow: 0 0 5px var(--arasaka-red);
    }
    
    .form-group input::placeholder {
        color: var(--arasaka-medium-gray);
    }

    button {
      width: 100%;
      padding: 0.85rem;
      background-color: var(--arasaka-red);
      color: var(--arasaka-black);
      border: none;
      font-size: 1.2rem;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      cursor: pointer;
      margin-top: 1rem;
      border-radius: 0;
      transition: background-color 0.2s, color 0.2s;
    }

    button:hover {
      background-color: var(--arasaka-light-gray);
      color: var(--arasaka-red);
    }

	   /* Estilo para o preview da foto */
	   .profile-pic-preview-container {
	       width: 120px;
	       height: 120px;
	       margin: 0 auto 1.5rem auto;
	   }
	   .profile-pic {
	       width: 100%;
	       height: 100%;
	       border-radius: 50%;
	       border: 3px solid var(--arasaka-medium-gray);
	       object-fit: cover;
	       background-color: var(--arasaka-black);
	   }
  </style>
</head>
<body>

  <!-- Logo da Arasaka usando um link de imagem externo -->
  <img src="https://i.postimg.cc/QdNJVLYr/image.png" alt="Logo da Arasaka" class="arasaka-corner-logo">

  <div class="form-container">
    <h1>Registro Arasaka</h1>
    <form id="cidadaoForm">
		
		<!-- Seção do Preview da Foto -->
	<div class="profile-pic-preview-container">
		<img id="profilePicPreview" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0iIzU1NTU1NSI+PHBhdGggZD0iTTIxIDE5VjVINWMtMS4xIDAtMiAuOS0yIDJ2MTBjMCAxLjEuOSAyIDIgMmgxNGMxLjEgMCAyLS45IDItMnpNNi41IDE1LjVMMTAgMTJsMyA0aDQuNWwtNi41LTguNUw2LjUgMTUuNXoiLz48L3N2Zz4=" class="profile-pic" alt="Retrato do Ativo" onerror="this.onerror=null;this.src='data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0iIzU1NTU1NSI+PHBhdGggZD0iTTIxIDE5VjVINWMtMS4xIDAtMiAuOS0yIDJ2MTBjMCAxLjEuOSAyIDIgMmgxNGMxLjEgMCAyLS45IDItMnpNNi41IDE1LjVMMTAgMTJsMyA0aDQuNWwtNi41LTguNUw2LjUgMTUuNXoiLz48L3N2Zz4=';">
	</div>
      
      <div class="form-group">
        <label for="nome">Nome do Ativo</label>
        <input type="text" id="nome" name="nome" placeholder="Inserir designação completa" required>
      </div>

	  <div class="form-group">
        <label for="idade">Idade Operacional</label>
        <input type="number" id="idade" name="idade" placeholder="Inserir idade registrada" required>
      </div>
      
      <div class="form-group">
        <label for="hwidSoc">HWID do SOC</label>
        <input type="text" id="hwidSoc" name="hwidSoc" placeholder="[Gerado automaticamente pelo sistema]" disabled>
      </div>
      <div class="form-group">
        <label for="modeloSoc">Modelo do SOC</label>
        <input type="text" id="modeloSoc" name="modeloSoc" placeholder="Ex: Kusanagi-7, Chimera" required>
      </div>
      
      <div class="form-group">
        <label for="criadoraSoc">Fabricante do SOC</label>
        <select id="criadoraSoc" name="criadoraSoc">
          <option value="ARASAKA">Arasaka</option>
          <option value="MILITECH">Militech</option>
          <option value="BIOTECH">Biotech</option>
          <option value="HYDRA">Hydra</option>
          <option value="KANGTOO">KANG TOO</option>
        </select>
      </div>

      <div class="form-group">
        <label for="classe">Classificação Social</label>
        <select id="classe" name="classe">
          <option value="EXECUTIVA">Executiva</option>
          <option value="HACKER">Netrunner</option>
          <option value="MILITAR">Militar</option>
          <option value="CIVIL">Civil</option>
          <option value="NEKO">Neko</option>
          <option value="ELFA">Elfa</option>
          <option value="HUMANO">Humano</option>
          <option value="PROCURADO">Procurado</option>
          <option value="CAÇADO">Caçado</option>
          <option value="REALEZA">Realeza</option>
          <option value="IMIGRANTE">Imigrante</option>
          <option value="REFUGIADO">Refugiado</option>
        </select>
      </div>

      <div class="form-group">
        <label for="nivelAcesso">Nível de Acesso à Rede</label>
        <select id="nivelAcesso" name="nivelAcesso">
          <option value="PUBLICO">Público (Nível 1)</option>
          <option value="EMPRESARIAL">Empresarial (Nível 2)</option>
          <option value="MILITAR">Militar (Nível 3)</option>
          <option value="REALEZA">Realeza (Nível 4)</option>
        </select>
      </div>
      
	  <div class="form-group">
	    <label for="caminhoFoto">URL do Retrato Facial</label>
		<input type="text" id="caminhoFoto" name="caminhoFoto" placeholder="Cole o link para o arquivo de imagem">
	  </div>

      <button type="submit">Registrar Ativo</button>
    </form>
  </div>

  <script>
    const form = document.getElementById('cidadaoForm');
    const urlFotoInput = document.getElementById('caminhoFoto');
    const previewImage = document.getElementById('profilePicPreview');
    const defaultIcon = 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0iIzU1NTU1NSI+PHBhdGggZD0iTTIxIDE5VjVINWMtMS4xIDAtMiAuOS0yIDJ2MTBjMCAxLjEuOSAyIDIgMmgxNGMxLjEgMCAyLS45IDItMnpNNi41IDE1LjVMMTAgMTJsMyA0aDQuNWwtNi41LTguNUw2LjUgMTUuNXoiLz48L3N2Zz4=';

    // Atualiza o preview em tempo real quando o usuário digita ou cola no campo de URL
    urlFotoInput.addEventListener('input', function() {
      const url = this.value;
      if (url) {
        previewImage.src = url;
      } else {
        previewImage.src = defaultIcon;
      }
    });

    // Lógica para enviar o formulário
    form.addEventListener('submit', async function(e) {
      e.preventDefault();

      // Esta parte agora é muito mais simples!
      const formData = new FormData(this);
      const data = {};
      formData.forEach((value, key) => { data[key] = value; });

      try {
        const response = await fetch('http://localhost:8080/cidadaos', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(data)
        });

        if (response.ok) {
          alert('ATIVO REGISTRADO COM SUCESSO.');
          this.reset();
          previewImage.src = defaultIcon; // Reseta o preview
        } else {
          const error = await response.text();
          alert('ERRO: Falha no registro. ' + error);
        }
      } catch (error) {
        console.error('Erro de rede:', error);
        alert('ERRO DE REDE: Não foi possível conectar ao servidor.');
      }
    });
  </script>
</body>
</html>
